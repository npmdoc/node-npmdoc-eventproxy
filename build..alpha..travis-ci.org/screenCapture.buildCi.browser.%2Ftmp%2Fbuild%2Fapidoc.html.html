<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/JacksonTian/eventproxy">eventproxy (v0.3.5)</a>
</h1>
<h4>An implementation of task/event based asynchronous pattern.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.eventproxy">module eventproxy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.eventproxy">
            function <span class="apidocSignatureSpan"></span>eventproxy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy">
            function <span class="apidocSignatureSpan">eventproxy.</span>EventProxy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.create">
            function <span class="apidocSignatureSpan">eventproxy.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">eventproxy.</span>EventProxy.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.eventproxy.EventProxy">module eventproxy.EventProxy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.EventProxy">
            function <span class="apidocSignatureSpan">eventproxy.</span>EventProxy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.create">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.</span>create
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.eventproxy.EventProxy.prototype">module eventproxy.EventProxy.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.addListener">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>addListener
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.after">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>after
            <span class="apidocSignatureSpan">(eventname, times, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.all">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>all
            <span class="apidocSignatureSpan">(eventname1, eventname2, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.any">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>any
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.asap">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>asap
            <span class="apidocSignatureSpan">(ev, callback, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.assign">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assign
            <span class="apidocSignatureSpan">(eventname1, eventname2, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.assignAll">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assignAll
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.assignAlways">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assignAlways
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.bind">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>bind
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.bindForAll">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>bindForAll
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.done">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>done
            <span class="apidocSignatureSpan">(handler, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.doneLater">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>doneLater
            <span class="apidocSignatureSpan">(handler, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.emit">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>emit
            <span class="apidocSignatureSpan">(eventname, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.emitLater">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>emitLater
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.fail">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>fail
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.fire">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>fire
            <span class="apidocSignatureSpan">(eventname, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.group">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>group
            <span class="apidocSignatureSpan">(eventname, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.headbind">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>headbind
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.immediate">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>immediate
            <span class="apidocSignatureSpan">(ev, callback, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.not">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>not
            <span class="apidocSignatureSpan">(eventname, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.on">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>on
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.once">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>once
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.removeAllListeners">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>removeAllListeners
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.removeListener">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>removeListener
            <span class="apidocSignatureSpan">(eventname, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.subscribe">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>subscribe
            <span class="apidocSignatureSpan">(ev, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.tail">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>tail
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.throw">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>throw
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.trigger">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>trigger
            <span class="apidocSignatureSpan">(eventname, data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.unbind">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>unbind
            <span class="apidocSignatureSpan">(eventname, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.eventproxy.EventProxy.prototype.unbindForAll">
            function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>unbindForAll
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.eventproxy" id="apidoc.module.eventproxy">module eventproxy</a></h1>


    <h2>
        <a href="#apidoc.element.eventproxy.eventproxy" id="apidoc.element.eventproxy.eventproxy">
        function <span class="apidocSignatureSpan"></span>eventproxy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eventproxy = function () {
  if (!(this instanceof EventProxy)) {
    return new EventProxy();
  }
  this._callbacks = {};
  this._fired = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy" id="apidoc.element.eventproxy.EventProxy">
        function <span class="apidocSignatureSpan">eventproxy.</span>EventProxy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">EventProxy = function () {
  if (!(this instanceof EventProxy)) {
    return new EventProxy();
  }
  this._callbacks = {};
  this._fired = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.create" id="apidoc.element.eventproxy.create">
        function <span class="apidocSignatureSpan">eventproxy.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var ep = new EventProxy();
  var args = CONCAT.apply([], arguments);
  if (args.length) {
    var errorHandler = args[args.length - 1];
    var callback = args[args.length - 2];
    if (typeof errorHandler === 'function' &amp;&amp; typeof callback === 'function') {
      args.pop();
      ep.fail(errorHandler);
    }
    ep.assign.apply(ep, args);
  }
  return ep;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
4. å‹å¥½çš„Error handling
5. æ—&nbsp;å¹³å°ä¾èµ–ï¼Œé€‚åˆå‰åŽç«¯ï¼Œèƒ½ç”¨äºŽæµè§ˆå™¨å’ŒNode.js
6. å…¼å®¹CMDï¼ŒAMDä»¥åŠCommonJSæ¨¡å—çŽ¯å¢ƒ

çŽ°åœ¨çš„ï¼Œæ—&nbsp;æ·±åº¦åµŒå¥—çš„ï¼Œå¹¶è¡Œçš„

```js
var ep = EventProxy.<span class="apidocCodeKeywordSpan">create</span>("template", "data", "l10n",
function (template, data, l10n) {
  _.template(template, data, l10n);
});

$.get("template", function (template) {
  // something
  ep.emit("template", template);
});
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.eventproxy.EventProxy" id="apidoc.module.eventproxy.EventProxy">module eventproxy.EventProxy</a></h1>


    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.EventProxy" id="apidoc.element.eventproxy.EventProxy.EventProxy">
        function <span class="apidocSignatureSpan">eventproxy.</span>EventProxy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">EventProxy = function () {
  if (!(this instanceof EventProxy)) {
    return new EventProxy();
  }
  this._callbacks = {};
  this._fired = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.create" id="apidoc.element.eventproxy.EventProxy.create">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.</span>create
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function () {
  var ep = new EventProxy();
  var args = CONCAT.apply([], arguments);
  if (args.length) {
    var errorHandler = args[args.length - 1];
    var callback = args[args.length - 2];
    if (typeof errorHandler === 'function' &amp;&amp; typeof callback === 'function') {
      args.pop();
      ep.fail(errorHandler);
    }
    ep.assign.apply(ep, args);
  }
  return ep;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
4. å‹å¥½çš„Error handling
5. æ—&nbsp;å¹³å°ä¾èµ–ï¼Œé€‚åˆå‰åŽç«¯ï¼Œèƒ½ç”¨äºŽæµè§ˆå™¨å’ŒNode.js
6. å…¼å®¹CMDï¼ŒAMDä»¥åŠCommonJSæ¨¡å—çŽ¯å¢ƒ

çŽ°åœ¨çš„ï¼Œæ—&nbsp;æ·±åº¦åµŒå¥—çš„ï¼Œå¹¶è¡Œçš„

```js
var ep = EventProxy.<span class="apidocCodeKeywordSpan">create</span>("template", "data", "l10n",
function (template, data, l10n) {
  _.template(template, data, l10n);
});

$.get("template", function (template) {
  // something
  ep.emit("template", template);
});
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.eventproxy.EventProxy.prototype" id="apidoc.module.eventproxy.EventProxy.prototype">module eventproxy.EventProxy.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.addListener" id="apidoc.element.eventproxy.EventProxy.prototype.addListener">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>addListener
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addListener = function (ev, callback) {
  debug('Add listener for %s', ev);
  this._callbacks[ev] = this._callbacks[ev] || [];
  this._callbacks[ev].push(callback);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * Bind an event, specified by a string name, `ev`, to a `callback` function.
 * Passing __ALL_EVENT__ will bind the callback to all events fired.
* Examples:
 * ```js
 * var proxy = new EventProxy();
 * proxy.<span class="apidocCodeKeywordSpan">addListener</span>("template", function (event) {
 *   // TODO
 * });
 * ```
 * @param {String} eventname Event name.
 * @param {Function} callback Callback.
 */
EventProxy.prototype.addListener = function (ev, callback) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.after" id="apidoc.element.eventproxy.EventProxy.prototype.after">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>after
        <span class="apidocSignatureSpan">(eventname, times, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">after = function (eventname, times, callback) {
  if (times === 0) {
    callback.call(null, []);
    return this;
  }
  var proxy = this,
    firedData = [];
  this._after = this._after || {};
  var group = eventname + '_group';
  this._after[group] = {
    index: 0,
    results: []
  };
  debug('After emit %s times, event %s\'s listenner will execute', times, eventname);
  var all = function (name, data) {
    if (name === eventname) {
      times--;
      firedData.push(data);
      if (times &lt; 1) {
        debug('Event %s was emit %s, and execute the listenner', eventname, times);
        proxy.unbindForAll(all);
        callback.apply(null, [firedData]);
      }
    }
    if (name === group) {
      times--;
      proxy._after[group].results[data.index] = data.result;
      if (times &lt; 1) {
        debug('Event %s was emit %s, and execute the listenner', eventname, times);
        proxy.unbindForAll(all);
        callback.call(null, proxy._after[group].results);
      }
    }
  };
  proxy.bindForAll(all);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

### é‡å¤å¼‚æ­¥åä½œ
æ­¤å¤„ä»¥è¯»å–ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ä¸ºä¾‹ï¼Œåœ¨å¼‚æ­¥æ“ä½œä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ‰€æœ‰å¼‚æ­¥è°ƒç”¨ç»“æŸåŽï¼Œæ‰§è¡ŒæŸäº›æ“ä½œã€‚

```js
var ep = new EventProxy();
ep.<span class="apidocCodeKeywordSpan">after</span>('got_file', files.length, function (list) {
// åœ¨æ‰€æœ‰æ–‡ä»¶çš„å¼‚æ­¥æ‰§è¡Œç»“æŸåŽå°†è¢«æ‰§è¡Œ
// æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹éƒ½å­˜åœ¨listæ•°ç»„ä¸­
});
for (var i = 0; i &lt; files.length; i++) {
fs.readFile(files[i], 'utf-8', function (err, content) {
  // è§¦å‘ç»“æžœäº‹ä»¶
  ep.emit('got_file', content);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.all" id="apidoc.element.eventproxy.EventProxy.prototype.all">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>all
        <span class="apidocSignatureSpan">(eventname1, eventname2, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">all = function (eventname1, eventname2, callback) {
  var args = CONCAT.apply([], arguments);
  args.push(true);
  _assign.apply(this, args);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
## å¼‚æ­¥åä½œ
### å¤šç±»åž‹å¼‚æ­¥åä½œ
æ­¤å¤„ä»¥é¡µé¢æ¸²æŸ“ä¸ºåœºæ™¯ï¼Œæ¸²æŸ“é¡µé¢éœ€è¦æ¨¡æ¿ã€æ•°æ®ã€‚å‡è®¾éƒ½éœ€è¦å¼‚æ­¥è¯»å–ã€‚

```js
var ep = new EventProxy();
ep.<span class="apidocCodeKeywordSpan">all</span>('tpl', 'data', function (tpl, data) { // or ep.all(['
tpl', 'data'], function (tpl, data) {})
  // åœ¨æ‰€æœ‰æŒ‡å®šçš„äº‹ä»¶è§¦å‘åŽï¼Œå°†ä¼šè¢«è°ƒç”¨æ‰§è¡Œ
  // å‚æ•°å¯¹åº”å„è‡ªçš„äº‹ä»¶å
});
fs.readFile('template.tpl', 'utf-8', function (err, content) {
  ep.emit('tpl', content);
});
db.get('some sql', function (err, result) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.any" id="apidoc.element.eventproxy.EventProxy.prototype.any">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>any
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">any = function () {
  var proxy = this,
    callback = arguments[arguments.length - 1],
    events = SLICE.call(arguments, 0, -1),
    _eventname = events.join("_");

  debug('Add listenner for Any of events %j emit', events);
  proxy.once(_eventname, callback);

  var _bind = function (key) {
    proxy.bind(key, function (data) {
      debug('One of events %j emited, execute the listenner');
      proxy.trigger(_eventname, {"data": data, eventName: key});
    });
  };

  for (var index = 0; index &lt; events.length; index++) {
    _bind(events[index]);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.asap" id="apidoc.element.eventproxy.EventProxy.prototype.asap">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>asap
        <span class="apidocSignatureSpan">(ev, callback, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">asap = function (ev, callback, data) {
  this.bind(ev, callback);
  this.trigger(ev, data);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.assign" id="apidoc.element.eventproxy.EventProxy.prototype.assign">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assign
        <span class="apidocSignatureSpan">(eventname1, eventname2, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assign = function (eventname1, eventname2, callback) {
  var args = CONCAT.apply([], arguments);
  args.push(true);
  _assign.apply(this, args);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * A module that can be mixed in to *any object* in order to provide it with custom events.
 * You may `bind` or `unbind` a callback function to an event;
 * `trigger`-ing an event fires all callbacks in succession.
 * Examples:
 * ```js
 * var render = function (template, resources) {};
 * var proxy = new EventProxy();
 * proxy.<span class="apidocCodeKeywordSpan">assign</span>("template", "l10n", render);
 * proxy.trigger("template", template);
 * proxy.trigger("l10n", resources);
 * ```
 */
var EventProxy = function () {
  if (!(this instanceof EventProxy)) {
    return new EventProxy();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.assignAll" id="apidoc.element.eventproxy.EventProxy.prototype.assignAll">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assignAll
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assignAll = function () {
  var args = CONCAT.apply([], arguments);
  args.push(false);
  _assign.apply(this, args);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.assignAlways" id="apidoc.element.eventproxy.EventProxy.prototype.assignAlways">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>assignAlways
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assignAlways = function () {
  var args = CONCAT.apply([], arguments);
  args.push(false);
  _assign.apply(this, args);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.bind" id="apidoc.element.eventproxy.EventProxy.prototype.bind">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>bind
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bind = function (ev, callback) {
  debug('Add listener for %s', ev);
  this._callbacks[ev] = this._callbacks[ev] || [];
  this._callbacks[ev].push(callback);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // æˆåŠŸå›žè°ƒ
  callback(null, {
    template: tpl,
    data: data
  });
});
// ä¾¦å¬erroräº‹ä»¶
ep.<span class="apidocCodeKeywordSpan">bind</span>('error', function (err) {
  // å¸è½½æŽ‰æ‰€æœ‰handler
  ep.unbind();
  // å¼‚å¸¸å›žè°ƒ
  callback(err);
});
fs.readFile('template.tpl', 'utf-8', function (err, content) {
  if (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.bindForAll" id="apidoc.element.eventproxy.EventProxy.prototype.bindForAll">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>bindForAll
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bindForAll = function (callback) {
  this.bind(ALL_EVENT, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
    if (isOnce) {
      proxy.unbindForAll(_all);
    }
    debug('Events %j all emited with data %j', events, data);
    callback.apply(null, data);
  };
  proxy.<span class="apidocCodeKeywordSpan">bindForAll</span>(_all);
};

/**
 * Assign some events, after all events were fired, the callback will be executed once.
 *
 * Examples:
 * ```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.done" id="apidoc.element.eventproxy.EventProxy.prototype.done">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>done
        <span class="apidocSignatureSpan">(handler, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function (handler, callback) {
  var that = this;
  return function (err, data) {
    if (err) {
      // put all arguments to the error handler
      return that.emit.apply(that, ['error'].concat(SLICE.call(arguments)));
    }

    // callback(err, args1, args2, ...)
    var args = SLICE.call(arguments, 1);

    if (typeof handler === 'string') {
      // getAsync(query, ep.done('query'));
      // or
      // getAsync(query, ep.done('query', function (data) {
      //   return data.trim();
      // }));
      if (callback) {
        // only replace the args when it really return a result
        return that.emit(handler, callback.apply(null, args));
      } else {
        // put all arguments to the done handler
        //ep.done('some');
        //ep.on('some', function(args1, args2, ...){});
        return that.emit.apply(that, [handler].concat(args));
      }
    }

    // speed improve for mostly case: `callback(err, data)`
    if (arguments.length &lt;= 2) {
      return handler(data);
    }

    // callback(err, args1, args2, ...)
    handler.apply(null, args);
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      template: tpl,
      data: data
    });
  });
  // æ·»åŠ&nbsp;error handler
  ep.fail(callback);

  fs.readFile('template.tpl', 'utf-8', ep.<span class="apidocCodeKeywordSpan">done</span>('tpl'));
  db.get('some sql', ep.done('data'));
};
```

ä¸Šè¿°ä»£ç&nbsp;ä¼˜åŒ–ä¹‹åŽï¼Œä¸šåŠ¡å¼€å‘è€…å‡&nbsp;ä¹Žä¸ç”¨å…³å¿ƒå¼‚å¸¸å¤„ç†äº†ã€‚ä»£ç&nbsp;é‡é™ä½Žæ•ˆæžœæ˜Žæ˜¾ã€‚
è¿™é‡Œä»£ç&nbsp;çš„è½¬æ¢ï¼Œä¹Ÿè®¸æœ‰å¼€å‘è€…å¹¶ä¸æ”¾å¿ƒã€‚å…¶å®žç§˜è¯€åœ¨`fail`æ–¹æ³•å’Œ`done`æ–¹æ³•ä¸­ã€‚
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.doneLater" id="apidoc.element.eventproxy.EventProxy.prototype.doneLater">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>doneLater
        <span class="apidocSignatureSpan">(handler, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doneLater = function (handler, callback) {
  var _doneHandler = this.done(handler, callback);
  return function (err, data) {
    var args = arguments;
    later(function () {
      _doneHandler.apply(null, args);
    });
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```
ä¸Šé¢ä»£ç&nbsp;ä¸­ï¼Œæˆ‘ä»¬æŠŠ`db.check`çš„å›žè°ƒå‡½æ•°ä¸­çš„äº‹ä»¶é€šè¿‡`emitLater`è§¦å‘ï¼Œè¿™æ&nbsp;·,å°±ç®—`db.check`çš„å›žè°ƒå‡½æ•°è¢«åŒæ­¥æ‰§è¡Œäº†ï¼Œäº‹ä»¶çš„è§¦å‘ä¹Ÿè¿˜æ˜¯å¼‚æ­¥çš„ï¼Œ`ep`åœ¨å½“å‰äº‹ä»¶å¾ªçŽ¯ä¸­ç›‘å¬äº†æ‰€æœ‰çš„äº‹ä»¶ï¼Œä¹‹åŽçš„äº‹ä»¶å¾ªçŽ¯ä¸­æ‰ä¼šåŽ»è§¦å‘`check`äº‹ä»¶ã€‚ä»£ç&nbsp;é¡ºåºå°†å’Œé€»è¾‘é¡ºåºä¿æŒä¸€è‡´ã€‚
å½“ç„¶ï¼Œè¿™ä¹ˆå¤æ‚çš„ä»£ç&nbsp;ï¼Œå¿…é¡»å¯ä»¥åƒ`ep.done()`ä¸€æ&nbsp;·é€šè¿‡`doneLater`æ¥è§£å†³ï¼š

```js
var ep = EventProxy.create();

db.check('key', ep.<span class="apidocCodeKeywordSpan">doneLater</span>('check'));

ep.once('check', function (permission) {
permission &amp;&amp; db.get('key', ep.done('get'));
});

ep.once('get', function (data) {
render(data);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.emit" id="apidoc.element.eventproxy.EventProxy.prototype.emit">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>emit
        <span class="apidocSignatureSpan">(eventname, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function (eventname, data) {
  var list, ev, callback, i, l;
  var both = 2;
  var calls = this._callbacks;
  debug('Emit event %s with data %j', eventname, data);
  while (both--) {
    ev = both ? eventname : ALL_EVENT;
    list = calls[ev];
    if (list) {
      for (i = 0, l = list.length; i &lt; l; i++) {
        if (!(callback = list[i])) {
          list.splice(i, 1);
          i--;
          l--;
        } else {
          var args = [];
          var start = both ? 1 : 0;
          for (var j = start; j &lt; arguments.length; j++) {
            args.push(arguments[j]);
          }
          callback.apply(this, args);
        }
      }
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
var ep = EventProxy.create("template", "data", "l10n", function (template, data, l10n) {
_.template(template, data, l10n);
});

$.get("template", function (template) {
// something
ep.<span class="apidocCodeKeywordSpan">emit</span>("template", template);
});
$.get("data", function (data) {
// something
ep.emit("data", data);
});
$.get("l10n", function (l10n) {
// something
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.emitLater" id="apidoc.element.eventproxy.EventProxy.prototype.emitLater">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>emitLater
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitLater = function () {
  var self = this;
  var args = arguments;
  later(function () {
    self.trigger.apply(self, args);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
è¿™æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦çš„å°±æ˜¯ __å¼‚æ­¥äº‹ä»¶è§¦å‘__ï¼š

```js
var ep = EventProxy.create();

db.check('key', function (err, permission) {
if (err) {
  return ep.<span class="apidocCodeKeywordSpan">emitLater</span>('error', err);
}
ep.emitLater('check', permission);
});

ep.once('check', function (permission) {
permission &amp;&amp; db.get('key', function (err, data) {
  if (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.fail" id="apidoc.element.eventproxy.EventProxy.prototype.fail">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>fail
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fail = function (callback) {
  var that = this;

  that.once('error', function () {
    that.unbind();
    // put all arguments to the error handler
    // fail(function(err, args1, args2, ...){})
    callback.apply(null, arguments);
  });
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // æˆåŠŸå›žè°ƒ
    callback(null, {
      template: tpl,
      data: data
    });
  });
  // æ·»åŠ&nbsp;error handler
  ep.<span class="apidocCodeKeywordSpan">fail</span>(callback);

  fs.readFile('template.tpl', 'utf-8', ep.done('tpl'));
  db.get('some sql', ep.done('data'));
};
```

ä¸Šè¿°ä»£ç&nbsp;ä¼˜åŒ–ä¹‹åŽï¼Œä¸šåŠ¡å¼€å‘è€…å‡&nbsp;ä¹Žä¸ç”¨å…³å¿ƒå¼‚å¸¸å¤„ç†äº†ã€‚ä»£ç&nbsp;é‡é™ä½Žæ•ˆæžœæ˜Žæ˜¾ã€‚
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.fire" id="apidoc.element.eventproxy.EventProxy.prototype.fire">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>fire
        <span class="apidocSignatureSpan">(eventname, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fire = function (eventname, data) {
  var list, ev, callback, i, l;
  var both = 2;
  var calls = this._callbacks;
  debug('Emit event %s with data %j', eventname, data);
  while (both--) {
    ev = both ? eventname : ALL_EVENT;
    list = calls[ev];
    if (list) {
      for (i = 0, l = list.length; i &lt; l; i++) {
        if (!(callback = list[i])) {
          list.splice(i, 1);
          i--;
          l--;
        } else {
          var args = [];
          var start = both ? 1 : 0;
          for (var j = start; j &lt; arguments.length; j++) {
            args.push(arguments[j]);
          }
          callback.apply(this, args);
        }
      }
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.group" id="apidoc.element.eventproxy.EventProxy.prototype.group">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>group
        <span class="apidocSignatureSpan">(eventname, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">group = function (eventname, callback) {
  var that = this;
  var group = eventname + '_group';
  var index = that._after[group].index;
  that._after[group].index++;
  return function (err, data) {
    if (err) {
      // put all arguments to the error handler
      return that.emit.apply(that, ['error'].concat(SLICE.call(arguments)));
    }
    that.emit(group, {
      index: index,
      // callback(err, args1, args2, ...)
      result: callback ? callback.apply(null, SLICE.call(arguments, 1)) : data
    });
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```js
var ep = new EventProxy();
ep.after('got_file', files.length, function (list) {
  // åœ¨æ‰€æœ‰æ–‡ä»¶çš„å¼‚æ­¥æ‰§è¡Œç»“æŸåŽå°†è¢«æ‰§è¡Œ
  // æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹éƒ½å­˜åœ¨listæ•°ç»„ä¸­ï¼ŒæŒ‰é¡ºåºæŽ’åˆ—
});
for (var i = 0; i &lt; files.length; i++) {
  fs.readFile(files[i], 'utf-8', ep.<span class="apidocCodeKeywordSpan">group</span>('got_file'));
}
```
`group`ç§‰æ‰¿`done`å‡½æ•°çš„è®¾è®¡ï¼Œå®ƒåŒ…å«å¼‚å¸¸çš„ä¼&nbsp;é€’ã€‚åŒæ—¶å®ƒè¿˜éšå«äº†å¯¹è¿”å›žæ•°æ®è¿›è¡Œç¼–å·ï¼Œåœ¨ç»“æŸæ—¶ï¼ŒæŒ‰é¡ºåºè¿”å›žã€‚

```js
ep.group('got_file');
// çº¦ç­‰ä»·äºŽ
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.headbind" id="apidoc.element.eventproxy.EventProxy.prototype.headbind">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>headbind
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">headbind = function (ev, callback) {
  debug('Add listener for %s', ev);
  this._callbacks[ev] = this._callbacks[ev] || [];
  this._callbacks[ev].unshift(callback);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.immediate" id="apidoc.element.eventproxy.EventProxy.prototype.immediate">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>immediate
        <span class="apidocSignatureSpan">(ev, callback, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">immediate = function (ev, callback, data) {
  this.bind(ev, callback);
  this.trigger(ev, data);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.not" id="apidoc.element.eventproxy.EventProxy.prototype.not">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>not
        <span class="apidocSignatureSpan">(eventname, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">not = function (eventname, callback) {
  var proxy = this;
  debug('Add listenner for not event %s', eventname);
  proxy.bindForAll(function (name, data) {
    if (name !== eventname) {
      debug('listenner execute of event %s emit, but not event %s.', name, eventname);
      callback(data);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.on" id="apidoc.element.eventproxy.EventProxy.prototype.on">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>on
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (ev, callback) {
  debug('Add listener for %s', ev);
  this._callbacks[ev] = this._callbacks[ev] || [];
  this._callbacks[ev].push(callback);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
ep.once('get', function (err, data) {
  if (err) {
    return ep.emit('error', err);
  }
  render(data);
});

ep.<span class="apidocCodeKeywordSpan">on</span>('error', errorHandler);
```

æ²¡é”™ï¼Œä¸‡ä¸€`db.check`çš„`callback`è¢«åŒæ­¥æ‰§è¡Œäº†ï¼Œåœ¨`ep`ç›‘å¬`check`äº‹ä»¶ä¹‹å‰ï¼Œå®ƒå°±å·²ç»è¢«æŠ›å‡ºæ¥äº†ï¼ŒåŽç»­é€»è¾‘æ²¡åŠžæ³•ç»§ç»­æ‰§è¡Œã€‚å°½ç®¡nodeçš„çº¦å®šæ˜¯æ‰€æœ‰çš„`callback`éƒ½æ˜¯éœ€è¦å¼‚æ­¥è¿”å›žçš„ï¼Œä½†æ˜¯å¦‚æžœè¿™ä¸ªæ–¹æ³•æ˜¯ç”±ç¬¬ä¸‰æ–¹æä¾›çš„ï¼Œæˆ‘ä»¬æ²¡æœ‰åŠžæ³•ä¿è¯`
db.check`çš„`callback`ä¸€å®šä¼šå¼‚æ­¥æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä»£ç&nbsp;é€šå¸¸å°±å˜æˆäº†è¿™æ&nbsp;·:

```js
var ep = EventProxy.create();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.once" id="apidoc.element.eventproxy.EventProxy.prototype.once">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>once
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">once = function (ev, callback) {
  var self = this;
  var wrapper = function () {
    callback.apply(self, arguments);
    self.unbind(ev, wrapper);
  };
  this.bind(ev, wrapper);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
db.check('key', function (err, permission) {
  if (err) {
    return ep.emit('error', err);
  }
  ep.emit('check', permission);
});

ep.<span class="apidocCodeKeywordSpan">once</span>('check', function (permission) {
  permission &amp;&amp; db.get('key', function (err, data) {
    if (err) {
      return ep.emit('error');
    }
    ep.emit('get', data);
  });
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.removeAllListeners" id="apidoc.element.eventproxy.EventProxy.prototype.removeAllListeners">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>removeAllListeners
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (event) {
  return this.unbind(event);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.removeListener" id="apidoc.element.eventproxy.EventProxy.prototype.removeListener">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>removeListener
        <span class="apidocSignatureSpan">(eventname, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeListener = function (eventname, callback) {
  var calls = this._callbacks;
  if (!eventname) {
    debug('Remove all listeners');
    this._callbacks = {};
  } else {
    if (!callback) {
      debug('Remove all listeners of %s', eventname);
      calls[eventname] = [];
    } else {
      var list = calls[eventname];
      if (list) {
        var l = list.length;
        for (var i = 0; i &lt; l; i++) {
          if (callback === list[i]) {
            debug('Remove a listener of %s', eventname);
            list[i] = null;
          }
        }
      }
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.subscribe" id="apidoc.element.eventproxy.EventProxy.prototype.subscribe">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>subscribe
        <span class="apidocSignatureSpan">(ev, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">subscribe = function (ev, callback) {
  debug('Add listener for %s', ev);
  this._callbacks[ev] = this._callbacks[ev] || [];
  this._callbacks[ev].push(callback);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.tail" id="apidoc.element.eventproxy.EventProxy.prototype.tail">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>tail
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tail = function () {
  var args = CONCAT.apply([], arguments);
  args.push(false);
  _assign.apply(this, args);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
`after`æ–¹æ³•é€‚åˆé‡å¤çš„æ“ä½œï¼Œæ¯”å¦‚è¯»å–10ä¸ªæ–‡ä»¶ï¼Œè°ƒç”¨5æ¬¡æ•°æ®åº“ç­‰ã€‚å°†handleræ³¨å†Œåˆ°Næ¬¡ç›¸åŒäº‹ä»¶çš„è§¦å‘ä¸Šã€‚è¾¾åˆ°æŒ‡å®šçš„è§¦å‘æ•°ï¼Œhandlerå°†ä¼šè¢«è°ƒç”¨æ‰§è¡Œï¼Œæ¯æ¬¡è§¦å‘çš„æ•°æ®ï¼Œå°†ä¼šæŒ‰è§¦å‘é¡ºåºï¼Œå­˜ä¸ºæ•°ç»„ä½œä¸ºå‚æ•°ä¼&nbsp;å…¥ã€‚

### æŒç»­åž‹å¼‚æ­¥åä½œ
æ­¤å¤„ä»¥è‚¡ç¥¨ä¸ºä¾‹ï¼Œæ•°æ®å’Œæ¨¡æ¿éƒ½æ˜¯å¼‚æ­¥èŽ·å–ï¼Œä½†æ˜¯æ•°æ®ä¼šæŒç»­åˆ·æ–°ï¼Œè§†å›¾ä¼šéœ€è¦é‡æ–°åˆ·æ–°ã€‚

```js
var ep = new EventProxy();
ep.<span class="apidocCodeKeywordSpan">tail</span>('tpl', 'data', function (tpl, data) {
  // åœ¨æ‰€æœ‰æŒ‡å®šçš„äº‹ä»¶è§¦å‘åŽï¼Œå°†ä¼šè¢«è°ƒç”¨æ‰§è¡Œ
  // å‚æ•°å¯¹åº”å„è‡ªçš„äº‹ä»¶åçš„æœ€æ–°æ•°æ®
});
fs.readFile('template.tpl', 'utf-8', function (err, content) {
  ep.emit('tpl', content);
});
setInterval(function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.throw" id="apidoc.element.eventproxy.EventProxy.prototype.throw">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>throw
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">throw = function () {
  var that = this;
  that.emit.apply(that, ['error'].concat(SLICE.call(arguments)));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### ç¥žå¥‡çš„ throw

`throw` æ˜¯ `ep.emit('error', err)` çš„ç®€å†™ã€‚

```js
var err = new Error();
ep.<span class="apidocCodeKeywordSpan">throw</span>(err);
// å®žé™…æ˜¯
ep.emit('error', err);
```

### ç¥žå¥‡çš„done

```js
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.trigger" id="apidoc.element.eventproxy.EventProxy.prototype.trigger">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>trigger
        <span class="apidocSignatureSpan">(eventname, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trigger = function (eventname, data) {
  var list, ev, callback, i, l;
  var both = 2;
  var calls = this._callbacks;
  debug('Emit event %s with data %j', eventname, data);
  while (both--) {
    ev = both ? eventname : ALL_EVENT;
    list = calls[ev];
    if (list) {
      for (i = 0, l = list.length; i &lt; l; i++) {
        if (!(callback = list[i])) {
          list.splice(i, 1);
          i--;
          l--;
        } else {
          var args = [];
          var start = both ? 1 : 0;
          for (var j = start; j &lt; arguments.length; j++) {
            args.push(arguments[j]);
          }
          callback.apply(this, args);
        }
      }
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * You may `bind` or `unbind` a callback function to an event;
 * `trigger`-ing an event fires all callbacks in succession.
 * Examples:
 * ```js
 * var render = function (template, resources) {};
 * var proxy = new EventProxy();
 * proxy.assign("template", "l10n", render);
 * proxy.<span class="apidocCodeKeywordSpan">trigger</span>("template", template);
 * proxy.trigger("l10n", resources);
 * ```
 */
var EventProxy = function () {
  if (!(this instanceof EventProxy)) {
    return new EventProxy();
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.unbind" id="apidoc.element.eventproxy.EventProxy.prototype.unbind">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>unbind
        <span class="apidocSignatureSpan">(eventname, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unbind = function (eventname, callback) {
  var calls = this._callbacks;
  if (!eventname) {
    debug('Remove all listeners');
    this._callbacks = {};
  } else {
    if (!callback) {
      debug('Remove all listeners of %s', eventname);
      calls[eventname] = [];
    } else {
      var list = calls[eventname];
      if (list) {
        var l = list.length;
        for (var i = 0; i &lt; l; i++) {
          if (callback === list[i]) {
            debug('Remove a listener of %s', eventname);
            list[i] = null;
          }
        }
      }
    }
  }
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    template: tpl,
    data: data
  });
});
// ä¾¦å¬erroräº‹ä»¶
ep.bind('error', function (err) {
  // å¸è½½æŽ‰æ‰€æœ‰handler
  ep.<span class="apidocCodeKeywordSpan">unbind</span>();
  // å¼‚å¸¸å›žè°ƒ
  callback(err);
});
fs.readFile('template.tpl', 'utf-8', function (err, content) {
  if (err) {
    // ä¸€æ—¦å‘ç”Ÿå¼‚å¸¸ï¼Œä¸€å¾‹äº¤ç»™erroräº‹ä»¶çš„handlerå¤„ç†
    return ep.emit('error', err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.eventproxy.EventProxy.prototype.unbindForAll" id="apidoc.element.eventproxy.EventProxy.prototype.unbindForAll">
        function <span class="apidocSignatureSpan">eventproxy.EventProxy.prototype.</span>unbindForAll
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unbindForAll = function (callback) {
  this.unbind(ALL_EVENT, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      return;
    }
    var data = [];
    for (var index = 0; index &lt; length; index++) {
      data.push(proxy._fired[events[index]].data);
    }
    if (isOnce) {
      proxy.<span class="apidocCodeKeywordSpan">unbindForAll</span>(_all);
    }
    debug('Events %j all emited with data %j', events, data);
    callback.apply(null, data);
  };
  proxy.bindForAll(_all);
};
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>